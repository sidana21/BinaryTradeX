# ุฏููู ูุดุฑ ุงูุชุทุจูู ุนูู Render

## ุงููุดุงูู ุงูุดุงุฆุนุฉ ูุงูุญููู

### 1. ุฅุนุฏุงุฏุงุช Render ุงูุฃุณุงุณูุฉ
ูู ููุญุฉ ุชุญูู Render:
- **Build Command**: `npm install`
- **Start Command**: `npm start`
- **Environment**: Node
- **Port**: ุณูุชู ุงุฎุชูุงุฑู ุชููุงุฆูุงู ูู `process.env.PORT`

### 2. ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุงููุทููุจุฉ
ุฃุถู ูุฐู ุงููุชุบูุฑุงุช ูู Render Dashboard โ Environment:
```
NODE_ENV=production
SESSION_SECRET=your-secret-key-change-this
```

### 3. ูุดููุฉ WebSocket
ุงูุชุทุจูู ููุนูุฏ ุจุดูู ุตุญูุญ ููุนูู ุนูู Render:
- โ WebSocket ูุฑุชุจุท ุจููุณ HTTP server
- โ ุงูุจุฑูุชูููู ูุชู ุงูุชุดุงูู ุชููุงุฆูุงู (ws/wss)
- โ ุงููููุฐ ูุณุชุฎุฏู process.env.PORT

### 4. ุงูุชุฃูุฏ ูู ุนูู WebSocket ุนูู Render

ุงูุชุญ Console ูู ุงููุชุตูุญ ูุงุจุญุซ ุนู:
- ุฅุฐุง ุฑุฃูุช ุฎุทุฃ `WebSocket connection failed`ุ ุชุญูู ูู:
  1. ุฃู ุงูุชุทุจูู ูุณุชุฎุฏู `wss://` ูููุณ `ws://`
  2. ุฃู ุงูุฎุงุฏู ูุณุชูุน ุนูู ุงููููุฐ ุงูุตุญูุญ

### 5. ูุตุงุฆุญ ูููุฉ

#### A. ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
ุฅุฐุง ููุช ุชุณุชุฎุฏู ูุงุนุฏุฉ ุจูุงูุงุช:
- ุงุณุชุฎุฏู ูุชุบูุฑ ุงูุจูุฆุฉ `DATABASE_URL` ุนูู Render
- ุชุฃูุฏ ูู ุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ููุณ ุงูููุทูุฉ ุงูุฌุบุฑุงููุฉ

#### B. ูุนุงูุฌ ุงูุฅููุงู ุงูุณูุณ (Graceful Shutdown)
ุงูููุฏ ุงูุญุงูู ูุง ูุชุถูู ูุนุงูุฌ SIGTERM. ุฃุถู ูุฐุง ูู ููุงูุฉ `server/index.ts`:

```typescript
// Graceful shutdown for Render deployments
process.on('SIGTERM', () => {
  console.log('SIGTERM received, closing server gracefully...');
  
  server.close(() => {
    console.log('Server closed');
    process.exit(0);
  });
});
```

#### C. ุงูุงุญุชูุงุธ ุจุงูุงุชุตุงู (Keep-Alive)
ุนูู ุงูุฎุทุฉ ุงููุฌุงููุฉ ูู Renderุ ุงูุฎุฏูุฉ ุชุชููู ุจุนุฏ 15 ุฏูููุฉ ูู ุนุฏู ุงููุดุงุท.
ูููุน ุฐูู:
- ุงุณุชุฎุฏู ุฎุฏูุฉ ping ูุซู UptimeRobot
- ุฃู ุชุฑููุฉ ููุฎุทุฉ ุงููุฏููุนุฉ

### 6. ุงุฎุชุจุงุฑ WebSocket ุจุนุฏ ุงููุดุฑ

ุงุณุชุฎุฏู ุฃุฏูุงุช ุงููุทูุฑ ูู ุงููุชุตูุญ:
```javascript
// ุงูุชุญ Console ูู ุงููุชุตูุญ ูุฌุฑุจ:
const ws = new WebSocket('wss://your-app.onrender.com/ws');
ws.onopen = () => console.log('โ Connected');
ws.onmessage = (e) => console.log('๐จ Received:', e.data);
ws.onerror = (e) => console.error('โ Error:', e);
```

### 7. ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ ูุญููููุง

| ุงููุดููุฉ | ุงูุณุจุจ | ุงูุญู |
|---------|-------|------|
| ุงูุดููุน ูุง ุชุธูุฑ | WebSocket ุบูุฑ ูุชุตู | ุชุญูู ูู Console ููุฃุฎุทุงุก |
| `400 Bad Request` | ุฎุทุฃ ูู handshake | ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู wss:// |
| `Connection timeout` | ุงููููุฐ ุบูุฑ ุตุญูุญ | ุงุณุชุฎุฏู process.env.PORT |
| ุงูุชุทุจูู ูุชููู | ุงูุฎุทุฉ ุงููุฌุงููุฉ | ุงุณุชุฎุฏู ping service |

### 8. ูุญุต ุงูุณุฌูุงุช (Logs) ุนูู Render

ูู Render Dashboard โ Logsุ ุงุจุญุซ ุนู:
```
๐ Initializing OTC markets...
serving on port [ุฑูู ุงููููุฐ]
```

ุฅุฐุง ุฑุฃูุช ูุฐู ุงูุฑุณุงุฆูุ ุงูุฎุงุฏู ูุนูู ุจุดูู ุตุญูุญ.

### 9. ุงููุฑู ุจูู Replit ู Render

| ุงูููุฒุฉ | Replit | Render |
|--------|--------|--------|
| WebSocket | ูุนูู ูุจุงุดุฑุฉ | ูุญุชุงุฌ wss:// |
| Port | 5000 ุซุงุจุช | ูุชุบูุฑ (10000 ุนุงุฏุฉ) |
| Always-On | ูุนู (ูุน Replit) | ูุง (ูุฌุงูุงู) |
| Database | ูุฏูุฌุฉ | ูููุตูุฉ |

## ุฎูุงุตุฉ
ุงูุชุทุจูู ููุนูุฏ ุจุดูู ุตุญูุญุ ููู ุชุฃูุฏ ูู:
1. ุงุณุชุฎุฏุงู `wss://` ุนูู Render (ูุชู ุชููุงุฆูุงู)
2. ุงููููุฐ ุงูุตุญูุญ ูู `process.env.PORT` (ููุฌูุฏ)
3. ุฅุถุงูุฉ ูุนุงูุฌ SIGTERM (ููุตู ุจู)
4. ุงุณุชุฎุฏุงู ping service ููุฎุทุฉ ุงููุฌุงููุฉ
